<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ForeGround Color Picker</title>
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
    <style>
        body {
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            text-align: center;
            min-height: 100vh;
            margin: 0;
            padding: 30px;
            box-sizing: border-box;
        }
    </style>
</head>
<body>
    <h1>Change the color</h1>
    <p>
        Pick the color below to change the background color
        and automatically generate the text color.
    </p>
    <input type="color" name="background_color" id="background_color">

    <script>
        const copyText = (idEl) => {
            const textEl = document.getElementById(idEl);

            textEl.select();
            textEl.setSelectionRange(0,Number.MAX_VALUE);

            navigator.clipboard.writeText(textEl.value);

            alert("Copied the text: " + textEl.value);
        }
    </script>
    <div>
        <br/>
        <input type="text" id="background_color_txt" readonly>
        &nbsp;
        <button onclick="copyText('background_color_txt')">Copy Text</button>
        <br/>
        <br/>
        <input type="text" id="background_color_rgb" readonly>
        &nbsp;
        <button onclick="copyText('background_color_rgb')">Copy Text</button>
        <br/>
        <br/>
        <input type="text" id="text_color_txt" readonly>
        &nbsp;
        <button onclick="copyText('text_color_txt')">Copy Text</button>
        
    </div>

    <script>
        const inputBGColor = document.getElementById('background_color');
        inputBGColor.value = '#56baed';

        const onInput = function () {
            const bg = hex2rgb(inputBGColor.value);

            const y = getRelativeLuminance(bg);

            const is_color_light = y > (255 / 2);

            let fg = '#ffffff';
            if(is_color_light) {
                fg = '#000000';
            }
            document.body.style.color = getCSSColorRGB(hex2rgb(fg));
            document.body.style.backgroundColor = getCSSColorRGB(bg);

            document.getElementById('text_color_txt').value = fg;
            document.getElementById('background_color_txt').value = inputBGColor.value;
            document.getElementById('background_color_rgb').value = getCSSColorRGB(bg);
        };
        inputBGColor.addEventListener('input', onInput);


        const hex2rgb = (hex) => {
            const r = parseInt(hex.slice(1, 3), 16);
            const g = parseInt(hex.slice(3, 5), 16);
            const b = parseInt(hex.slice(5, 7), 16);
            
            // return {r, g, b} 
            return { r, g, b };
        }
        const getRelativeLuminance = (rgb) =>
            0.2126 * rgb['r']
            + 0.7152 * rgb['g']
            + 0.0722 * rgb['b'];
        const getCSSColorRGB = (rgb) => `rgb(${rgb['r']},${rgb['g']},${rgb['b']})`;


        onInput();
    </script>
</body>
</html>